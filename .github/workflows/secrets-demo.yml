name: Secrets Demo

on:
  push:
    branches: [main]
  workflow_dispatch:  # Allows manual trigger

jobs:
  demo:
    runs-on: ubuntu-latest
    
    steps:
      - name: Show that secret exists (but stays hidden)
        run: |
          echo "Testing secrets..."
          echo "Secret length: ${#SECRET_VALUE}"
          echo "Trying to print secret: $SECRET_VALUE"
        env:
          SECRET_VALUE: ${{ secrets.TEST_SECRET }}
      
      - name: Use secret in a condition
        run: |
          if [ -n "$SECRET_VALUE" ]; then
            echo "✅ Secret is available to the workflow!"
          else
            echo "❌ Secret is empty or not set"
          fi
        env:
          SECRET_VALUE: ${{ secrets.TEST_SECRET }}